<script src="./js/cropper.js"></script>
<h1>js图片切割功能</h1>
<div class="cropperbox" id="cropperbox"></div>
<br>
<input type="file" id="file">
<br>
<br>
<div class="cropperBtn" id="cropperBtn">
	确定
</div>

<img src="" class="newimg" id="newimg">

<script>
	var sucFun = function(){
		document.getElementById("newimg").style.display = "block";
		flag = false;
		btn.innerHTML = "确定";
	};
	var imgcropper = new ImageCropper({
		box:"cropperbox", //box Id
		callback: sucFun
	});
	var flag = false;
	// imgcropper.loadImg("./testimages/2.pic_hd.jpg");
	var btn = document.getElementById("cropperBtn");
	btn.addEventListener('click',function(){
		if(flag){return false;}
		flag = true;
		btn.innerHTML = "图片生成中....";
		var newimg = imgcropper.fnnewimg();
		document.getElementById("newimg").src = newimg;
	});

	var file = document.getElementById("file");
	file.addEventListener('change',function(){
		var src = file.value;
		var reg = /image/i;
		var result = reg.test(file.files[0].type);
		if(!result){
					alert("图片格式错误");
					return false;
		}
		console.log(file.files)
		imgcropper.loadImg(file.files[0]);
	});
</script>